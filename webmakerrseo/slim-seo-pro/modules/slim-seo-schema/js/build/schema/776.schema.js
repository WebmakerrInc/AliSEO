"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[776],{2776:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(1609),l=a(3891),s=a(6427),o=a(6087),r=a(7723),u=a(811),c=a(5346),i=a(8184),m=a(1649),d=a(6832),p=a(7705),v=a(5179),f=a(3373),b=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];a(5795),a(6045);var S=(0,n.forwardRef)(function(e,t){var a=function(e){var t=e.defaultOptions,a=void 0!==t&&t,l=e.cacheOptions,s=void 0!==l&&l,o=e.loadOptions;e.options;var r=e.isLoading,u=void 0!==r&&r,c=e.onInputChange,i=e.filterOption,S=void 0===i?null:i,h=(0,v.A)(e,b),A=h.inputValue,g=(0,n.useRef)(void 0),E=(0,n.useRef)(!1),y=(0,n.useState)(Array.isArray(a)?a:void 0),O=(0,p.A)(y,2),k=O[0],C=O[1],_=(0,n.useState)(void 0!==A?A:""),N=(0,p.A)(_,2),R=N[0],$=N[1],x=(0,n.useState)(!0===a),z=(0,p.A)(x,2),I=z[0],L=z[1],j=(0,n.useState)(void 0),w=(0,p.A)(j,2),V=w[0],G=w[1],T=(0,n.useState)([]),D=(0,p.A)(T,2),P=D[0],q=D[1],B=(0,n.useState)(!1),F=(0,p.A)(B,2),H=F[0],J=F[1],K=(0,n.useState)({}),M=(0,p.A)(K,2),Q=M[0],U=M[1],W=(0,n.useState)(void 0),X=(0,p.A)(W,2),Y=X[0],Z=X[1],ee=(0,n.useState)(void 0),te=(0,p.A)(ee,2),ae=te[0],ne=te[1];s!==ae&&(U({}),ne(s)),a!==Y&&(C(Array.isArray(a)?a:void 0),Z(a)),(0,n.useEffect)(function(){return E.current=!0,function(){E.current=!1}},[]);var le=(0,n.useCallback)(function(e,t){if(!o)return t();var a=o(e,t);a&&"function"==typeof a.then&&a.then(t,function(){return t()})},[o]);(0,n.useEffect)(function(){!0===a&&le(R,function(e){E.current&&(C(e||[]),L(!!g.current))})},[]);var se=(0,n.useCallback)(function(e,t){var a=(0,f.L)(e,t,c);if(!a)return g.current=void 0,$(""),G(""),q([]),L(!1),void J(!1);if(s&&Q[a])$(a),G(a),q(Q[a]),L(!1),J(!1);else{var n=g.current={};$(a),L(!0),J(!V),le(a,function(e){E&&n===g.current&&(g.current=void 0,L(!1),G(a),q(e||[]),J(!1),U(e?(0,d.A)((0,d.A)({},Q),{},(0,m.A)({},a,e)):Q))})}},[s,le,V,Q,c]),oe=H?[]:R&&V?P:k||[];return(0,d.A)((0,d.A)({},h),{},{options:oe,isLoading:I||u,onInputChange:se,filterOption:S})}(e),l=(0,i.u)(a);return n.createElement(c.S,(0,u.A)({ref:t},l))}),h=a(333),A=a(4295);const g=({group:e,locations:t,base:a})=>{const[l,s]=(0,o.useState)(e),r=()=>s(e=>({...e,[(0,h.z0)()]:{name:"general:all",value:"all",label:SSSchema.text.all}})),u=e=>s(t=>{let a={...t};return delete a[e],a});return 0===Object.entries(l).length?"":(0,n.createElement)("div",{className:"sss-location-group"},Object.entries(l).map(([e,l])=>(0,n.createElement)(E,{key:e,rule:l,ruleId:e,locations:t,base:`${a}[${e}]`,addRule:r,removeRule:u})),(0,n.createElement)("div",{className:"sss-location-group__and"},SSSchema.text.and))},E=({rule:e,ruleId:t,locations:a,base:l,addRule:r,removeRule:u})=>{(0,o.useRef)();const[c,i]=(0,o.useState)(e),m=!c.name.includes("general:")&&!c.name.includes(":archive");return(0,n.createElement)("div",{className:"sss-location-rule"},(0,n.createElement)("select",{className:"sss-location-rule__name",name:`${l}[name]`,defaultValue:c.name,onChange:({target:{value:e}})=>i(t=>({...t,name:e}))},Object.values(a).map(({label:e,options:t})=>(0,n.createElement)("optgroup",{key:e,label:e},t.map(({value:e,label:t})=>(0,n.createElement)("option",{key:e,value:e},t))))),m&&(0,n.createElement)(S,{className:"sss-location-rule__value",classNamePrefix:"react-select",name:`${l}[value]`,key:c.name,defaultOptions:!0,loadOptions:e=>{const t=/:post$/.test(c.name)?"posts":"terms";return(0,A.G)({api:t,params:{term:e,name:c.name,selected:c.value}})},defaultValue:e,onChange:(e,{action:t})=>{"select-option"===t&&i(t=>({...t,...e}))}}),(0,n.createElement)("input",{type:"hidden",name:`${l}[label]`,value:c.label}),(0,n.createElement)("button",{type:"button",className:"button sss-location-rule__add",onClick:r},SSSchema.text.or),(0,n.createElement)("button",{type:"button",className:"sss-location-rule__remove",onClick:()=>u(t)},(0,n.createElement)(s.Dashicon,{icon:"dismiss"})))},y=({className:e,property:t})=>{const[a,s]=(0,o.useState)(()=>{if(!Array.isArray(t.std))return t.std;let e={};return t.std.forEach(t=>{const a=(0,h.z0)();e[a]={},t.forEach(t=>{const n=(0,h.z0)();e[a][n]=t})}),e});return(0,n.createElement)(l.Ec,{className:e,label:(0,r.__)("Location","slim-seo-schema")},Object.entries(a).map(([e,a])=>(0,n.createElement)(g,{key:e,group:a,locations:t.locations,base:`${t.id}[${e}]`})),(0,n.createElement)("button",{type:"button",className:"button sss-location-add-group",onClick:()=>s(e=>{let t={...e};const a=(0,h.z0)(),n=(0,h.z0)();return t[a]={[n]:{name:"general:all",value:"all",label:SSSchema.text.all}},t})},SSSchema.text.addGroup))}}}]);