"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[616],{8610:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(1609),n=s(6427),l=s(7723);function r({id:e,deleteProp:t}){return(0,a.createElement)(n.Dashicon,{className:"sss-field__remove",icon:"dismiss",onClick:s=>{confirm((0,l.__)("Are you sure you want to delete?"))&&(s.stopPropagation(),t(e))}})}},8616:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(1609),n=s(8114),l=s(6427),r=s(6087),o=s(7723),i=s(8610),d=s(5028),c=s(6948),m=s(9242),p=s(8835);const{useState:u,useReducer:_}=wp.element,E=({id:e,deleteProp:t})=>(0,a.createElement)("span",{className:"sss-panel__action sss-panel__action--delete",title:(0,o.__)("Remove","slim-seo-schema"),onClick:s=>{confirm((0,o.__)("Are you sure you want to delete?"))&&(s.stopPropagation(),t(e))}},(0,a.createElement)(c.A,{icon:m.A}));function h({title:e,defaultExpanded:t=!1,className:s,children:n,required:l,id:r,deleteProp:i}){const[d,c]=_((e=>!e),t),m=(0,p.default)("sss-panel",s,{"sss-panel--expanded":d}),u="dashicons-"+(d?"arrow-up-alt2":"arrow-down-alt2");return e?(0,a.createElement)("div",{className:m},e&&(0,a.createElement)("div",{className:"sss-panel__header"},(0,a.createElement)("div",{className:"sss-panel__title sss-column--title"},e),(0,a.createElement)("span",{className:"sss-panel__space sss-column--space",onClick:c,title:(0,o.__)("Click to reveal schema settings","slim-seo-schema")}),(0,a.createElement)("div",{className:"sss-panel__actions sss-column--actions"},!l&&(0,a.createElement)(E,{deleteProp:i,id:r}),(0,a.createElement)("button",{type:"button",onClick:c,className:`sss-panel__action dashicons ${u}`}))),(0,a.createElement)("div",{className:"sss-panel__body"},n)):n}var f=s(4567);const v=(0,r.memo)((({property:e,deleteProp:t})=>{const[s,c]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[u,_]=(0,r.useState)([]),E=e.std||{},{id:v}=e;(0,r.useEffect)((()=>{c((()=>e.fields.map((e=>{const t=b(e)||e.required||e.show,s=e.name?`${v}[${e.name}]`:`${v}`,a=`${s}[${e.id}]`,n=g(e);return{...e,id:a,std:n,parentID:s,visible:t,hidden:!1}}))))}),[]),(0,r.useEffect)((()=>{p((()=>s.filter((e=>e.visible&&!e.hidden)))),_((()=>s.filter((e=>!e.visible&&!e.hidden))))}),[s]);const b=e=>e.name?!!E[e.name]&&E[e.name].hasOwnProperty(e.id):E.hasOwnProperty(e.id),g=e=>{const t=e.std||"";return e.name?E[e.name]&&E[e.name][e.id]||t:E[e.id]||t},P=e=>{const t=m.filter((t=>t.id===e));p((t=>t.filter((t=>t.id!==e)))),_((e=>[...e,...t]))},{cloneable:w,cloneItemHeading:k,label:y,tooltip:N,panelNoBorder:A}=e,C=k||"",T=e.required&&!w,$=!w&&y,q=!w||A?"sss-panel--no-border":"";return(0,a.createElement)(n.Ec,{label:$,id:e.id,required:T,tooltip:N},(0,a.createElement)(h,{title:C,className:q,required:T,defaultExpanded:!0,deleteProp:t,id:e.id},m.map((e=>(0,a.createElement)(f.A,{key:e.id,property:e,setProperties:c,properties:s,deleteProp:P}))),Object.keys(u).length>0&&(0,a.createElement)(l.Dropdown,{className:"sss-dropdown",popoverProps:{placement:"bottom-start",noArrow:!1},renderToggle:({isOpen:e,onToggle:t})=>(0,a.createElement)(l.Button,{variant:"link",onClick:t,onBlur:s=>((e,t,s)=>{e.relatedTarget&&e.relatedTarget.closest(".components-popover")||!s||t()})(s,t,e),"aria-expanded":e},(0,o.__)("+ Add Property","slim-seo-schema")),renderContent:({onToggle:e})=>(0,a.createElement)(d.A,{items:u,onSelect:t=>((e,t)=>{t();const s=e.target.dataset.id;let a=u.filter((e=>e.id===s));a=a.map((e=>({...e,std:""}))),p((e=>[...e,...a])),_((e=>e.filter((e=>e.id!==s))))})(t,e)})}),T||(0,a.createElement)(i.A,{id:v,deleteProp:t})))}))}}]);